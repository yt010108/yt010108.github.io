## 가상화란?

**가상화**는 물리적인 컴퓨터 리소스(서버, 스토리지, 네트워크 등)를 논리적인 리소스로 변환하여, 실제로는 하나인 하드웨어를 여러 개의 가상 환경(VM, Virtual Machine)으로 보이게 하는 기술입니다. 
→ 하나 또는 여러개의 물리적인 컴퓨터를 가지고 원하는 개수의 컴퓨팅 환경으로 만드는 기술 

---

## 가상화 구현 방식

- **하이퍼바이저(Hypervisor):** 물리적 하드웨어와 가상 머신 사이에서 중계자 역할을 하는 소프트웨어입니다. 하드웨어 리소스를 가상화하여 각 가상 머신에 할당하고, 가상 머신들이 서로 격리된 상태에서 작동하도록 보장합니다. 하이퍼바이저는 다시 두 가지 유형으로 나뉩니다.
    - **타입 1 (네이티브 또는 베어메탈):** 하드웨어 위에 직접 설치되어 운영체제 역할을 합니다. (예: VMware ESXi, Microsoft Hyper-V, KVM)
        
        하드웨어 → **하이퍼바이저** → 가상 머신(os)
        
    - **타입 2 (호스트 기반):** 일반적인 운영체제(예: Windows, Linux) 위에 설치되어 작동합니다. (예: VMware Workstation, Oracle VirtualBox)
        
        하드웨어 → **호스트 OS** → **하이퍼바이저** → 가상 머신
        
- **컨테이너(Container):** 운영체제 수준에서 가상화를 수행합니다. 하이퍼바이저와 게스트 운영체제 없이, 호스트 운영체제의 커널을 공유하며 애플리케이션과 그 종속성만을 격리된 공간(컨테이너)에 패키징합니다. 가상 머신보다 훨씬 가볍고 빠르게 실행되는 장점이 있습니다. (예: Docker, Kubernetes)

→ 컨테이너와 하이퍼바이저 방식의 차이점은 커널을 공유하냐에 따라 다른 느낌 커널을 공유하는 것의 장점은 부팅 및 속도에 대한 차이이며 컨테이너 방식에서 가상환경을 실행하는 것은 프로세스 하나를 새로 만드는 것과 비슷한 속도이며 환경 자체를 옮길 수 있다는 것은 큰 장점이다.

하이퍼바이저도 환경 옮길 수 있는 거 아니야?

→ 미리 모든 환경을 설정한 **가상 머신(VM) 이미지 즉** 골든 이미지(Golden Image)라고 한다. VM을 배포했더라도, 운영 중 급하게 패치를 하거나 설정을 바꾸기 위해 개발자가 서버에 직접 접속해서 명령어를 실행하는 경우가 많습니다. 이렇게 되면 **실제 운영되는 서버의 환경**과 **원본인 '골든 이미지'의 환경**이 달라지는 **'설정 드리프트'**가 발생합니다. 결국 환경 일관성은 깨지게 됩니다. 즉 환경 관리가 어려움 게다가 속도도 느림

---

## 컨테이너(**Container**)

### 컨테이너의 작동 원리 ⚙️

- **네임스페이스 (Namespaces):** 컨테이너에 격리된 가상 공간을 제공하는 기술입니다. 각 컨테이너는 자신만의 독립된 프로세스 ID, 네트워크, 파일 시스템을 가진 것처럼 보입니다. 이 덕분에 컨테이너 안에서 실행되는 애플리케이션은 마치 독립된 컴퓨터에서 실행되는 것처럼 다른 컨테이너의 존재를 알지 못합니다.
- **컨트롤 그룹 (cgroups):** 각 컨테이너가 사용할 수 있는 하드웨어 자원(CPU, 메모리, 스토리지 등)의 양을 제한하고 관리합니다. 이를 통해 특정 컨테이너가 서버의 모든 자원을 독차지하는 것을 방지하고, 여러 컨테이너가 안정적으로 공존할 수 있도록 합니다.

```haskell
lsns명령어를 통해서 리눅스 환경에서 네임스페이스와 컨트롤 그룹을 확인 가능함

TYPE: 네임스페이스의 종류입니다.
mnt: 마운트 네임스페이스 (파일 시스템)

uts: 호스트 이름과 도메인 이름

ipc: 프로세스 간 통신

pid: 프로세스 ID

user: 사용자 및 그룹 ID

net: 네트워크 장치, 스택, 포트 등

cgroup: 컨트롤 그룹
```

![image.png](attachment:5eb4482d-38c3-4bee-8f06-9e6aac3a6c3e:image.png)

# 컨테이너 어플리키에션

## **도커 (Docker)**

 리눅스의 응용 프로그램들을 프로세스 격리 기술들을 사용해 컨테이너로 실행하고 관리하는 오픈 소스 프로젝트이다.

- **도커 이미지 :** 는 애플리케이션을 실행하는 데 필요한 모든 것을 포함하는 정적이고 변하지 않는 파일입니다. 애플리케이션 코드, 런타임, 라이브러리, 환경 변수, 설정 파일 등 실행에 필요한 모든 요소가 들어있습니다.
- **도커 컨테이너**  : 도커 컨테이너는 도커 이미지를 실행한 상태로, 격리된 공간에서 작동하는 프로세스입니다. 이미지의 모든 것을 포함하며, 그 위에 **쓰기 가능한 컨테이너 계층(Writable Layer)**을 추가로 가집니다.
- **도커 네트워크 :** 도커 네트워크는 컨테이너들을 서로 연결하고 외부 세계와 통신할 수 있도록 해주는 가상 네트워크 기능입니다. 외부와 연결하기 위해서는 포트 포워딩 또는 포트 매핑 설정이 필요합니다. 

## **쿠버네티스 (Kubernetes)**

 수많은 컨테이너를 **효율적으로 관리하고 자동화하는 도구**입니다. 컨테이너의 배포, 확장, 상태 모니터링, 자동 복구 등을 책임지는 '컨테이너 오케스트레이션' 플랫폼의 사실상 표준입니다. 도커가 컨테이너를 만드는 기술이라면, 쿠버네티스는 그 컨테이너들을 지휘하는 오케스트라의 지휘자라고 할 수 있습니다.